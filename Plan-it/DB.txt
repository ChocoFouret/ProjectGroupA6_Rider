-- DBCC CHECKIDENT (table, RESEED, 0)

USE gamer;

DROP DATABASE GroupeA6;
CREATE DATABASE GroupeA6;

USE GroupeA6;

CREATE TABLE Functions
(
    idFunction INT IDENTITY NOT NULL PRIMARY KEY,
    title VARCHAR(50) NOT NULL,
)

CREATE TABLE Accounts
(
    idAccount INT IDENTITY NOT NULL PRIMARY KEY,
    email VARCHAR(100) NOT NULL UNIQUE,
    passwordHash VARCHAR(200) NOT NULL,
    lastName VARCHAR(50) NOT NULL,
    firstName VARCHAR(100) NOT NULL,
    street VARCHAR(100) NOT NULL,
    number VARCHAR(10) NOT NULL,
    postCode INT NOT NULL,
	city VARCHAR(30) NOT NULL,
    isChief bit NOT NULL,
    pictureURL VARCHAR(100) NOT NULL,
    idFunction INT NOT NULL,
    FOREIGN KEY(idFunction) REFERENCES Functions(idFunction)
)

CREATE TABLE Schedules
(
    idSchedule   INT IDENTITY NOT NULL PRIMARY KEY,
    DATESchedule DATE         NOT NULL,
    startHour    TIME         NOT NULL,
    endHour      TIME         NOT NULL,
    breakTime    TIME         NOT NULL,
    idAccount    INT          NOT NULL,
    FOREIGN KEY(idSchedule) REFERENCES Accounts(idAccount)
);

CREATE TABLE Holidays
(
    idHolidays   INT IDENTITY NOT NULL PRIMARY KEY,
    DATEHolidays DATE         NOT NULL,
    isAccepted   BIT          NOT NULL,
    comments     VARCHAR(200),
    idAccount INT NOT NULL,
    FOREIGN KEY(idHolidays) REFERENCES Accounts(idAccount)
);

CREATE TABLE Absents
(
    idAbsent INT IDENTITY NOT NULL PRIMARY KEY,
    DATEAbsent DATE NOT NULL,
    isJustified BIT NOT NULL,
    comments VARCHAR(200) NOT NULL,
    idAccount INT NOT NULL,
    FOREIGN KEY(idAbsent) REFERENCES Accounts(idAccount)
)